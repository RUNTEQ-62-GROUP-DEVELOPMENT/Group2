<%= stylesheet_link_tag 'mypages', media: 'all', "data-turbo-track": "reload" %>

<div class="container">
  <h3 class="title">マイページ</h3>

  <!-- 読書中の本一覧 -->
  <h4 class="title reading">読書中の本</h4>

  <!-- 読書中の本一覧表-->
  <table class="table">
    <tr>
      <th>タイトル</th>
      <th>著者</th>
      <th>総ページ数</th>
    </tr>
    <tbody>
      <% @books.each do |book| %>
        <tr>
          <td><%= book.title %></td>
          <td><%= book.author %></td>
          <td><%= book.pages %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- 挑戦中の目標一覧 -->
  <h4 class="title goals-progress">挑戦中の目標</h4>
  <table class="table">
    <tr>
      <th>タイトル</th>
      <th>読書開始日</th>
      <th>読了目標日</th>
      <th>目標ペース<br>(ページ/日)</th>
      <th>進捗</th>
    </tr>
    <tbody>
      <% @goals.each do |goal| %>
        <tr>
          <td><%= goal.book.title %></td>
          <td><%= goal.start_date %></td>
          <td><%= goal.target_date %></td>
          <td><%= goal.pages_per_day %></td>
          <td><%= ((goal.reading_pages.to_f / goal.book.pages)*100).floor %>%<br><%= goal.reading_pages %> / <%= goal.book.pages %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>